{"id":"amem-54","content_hash":"57bf559bc145ddbbe07163455f41d870a69c6e2359d8bdecf00641faadef358f","title":"Refactor formatting: create view/ package + String() methods","description":"Consolidate and organize formatting/printing functions.\n\nCurrent state:\n- All 6 formatting functions in main.go (lines 39-94)\n- Structural duplication across Entity/Observation/Relationship types\n- Custom search formatting (main.go:618-660) duplicates format functions\n\nRefactoring approach (options 1 + 2 + 4):\n\n1. Create view/view.go package\n   - Move 6 formatting functions from main.go\n   - Export: FormatEntities, FormatObservations, FormatRelationships\n   - Keep internal: printEntities, printObservations, printRelationships\n\n2. Add String() methods to db/db.go\n   - func (e Entity) String(withID bool) string\n   - func (o Observation) String(withID bool) string\n   - func (r Relationship) String(withID bool) string\n   - Update view/ functions to use these methods\n\n3. Update main.go\n   - Remove 6 formatting functions (lines 39-94)\n   - Import amem/view package\n   - Update all call sites to use view.Format* functions\n   - Refactor search command (lines 618-660) to use view functions\n\n4. Run tests\n   - mise run check to verify no regressions\n\nBenefits:\n- Clean separation of concerns (view layer)\n- Idiomatic Go (Stringer-like interface)\n- DRY - eliminates duplication in search command\n- More testable (can unit test formatting separately)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-29T14:45:15.645363-07:00","updated_at":"2025-10-29T15:11:53.154409-07:00","closed_at":"2025-10-29T15:11:53.154409-07:00"}
